(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4066],{83965:function(e,t,n){"use strict";n.d(t,{Z:function(){return Z}});var r=n(63366),s=n(87462),i=n(67294),o=n(63961),a=n(58510),c=n(71657),u=n(90948),l=n(1977),d=n(8027);function h(e){return(0,d.ZP)("MuiCardMedia",e)}(0,l.Z)("MuiCardMedia",["root","media","img"]);var f=n(85893);const m=["children","className","component","image","src","style"],p=(0,u.ZP)("div",{name:"MuiCardMedia",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{isMediaComponent:r,isImageComponent:s}=n;return[t.root,r&&t.media,s&&t.img]}})((({ownerState:e})=>(0,s.Z)({display:"block",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},e.isMediaComponent&&{width:"100%"},e.isImageComponent&&{objectFit:"cover"}))),g=["video","audio","picture","iframe","img"],x=["picture","img"];var Z=i.forwardRef((function(e,t){const n=(0,c.Z)({props:e,name:"MuiCardMedia"}),{children:i,className:u,component:l="div",image:d,src:Z,style:j}=n,v=(0,r.Z)(n,m),b=-1!==g.indexOf(l),k=!b&&d?(0,s.Z)({backgroundImage:`url("${d}")`},j):j,C=(0,s.Z)({},n,{component:l,isMediaComponent:b,isImageComponent:-1!==x.indexOf(l)}),y=(e=>{const{classes:t,isMediaComponent:n,isImageComponent:r}=e,s={root:["root",n&&"media",r&&"img"]};return(0,a.Z)(s,h,t)})(C);return(0,f.jsx)(p,(0,s.Z)({className:(0,o.Z)(y.root,u),as:l,role:!b&&d?"img":void 0,ref:t,style:k,ownerState:C,src:b?d||Z:void 0},v,{children:i}))}))},68498:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/stocks/products",function(){return n(64182)}])},86078:function(e,t,n){"use strict";var r=n(47568),s=n(97582),i=n(85893),o=n(11163),a=n(67294),c=n(5121);t.Z=function(e){var t=e.children,n=(0,o.useRouter)();return(0,a.useEffect)((function(){var e=function(){var e=(0,r.Z)((function(){var e,t,r;return(0,s.__generator)(this,(function(s){switch(s.label){case 0:if(!(e=sessionStorage.getItem("token")))return n.push("/login"),[2];s.label=1;case 1:return s.trys.push([1,3,,4]),[4,c.Z.get("".concat("http://localhost:5000","/api/public/user-type"),{headers:{Authorization:"Bearer ".concat(e)},withCredentials:!0})];case 2:return t=s.sent(),console.log(t.data),"false"===t.data?n.push("/login"):"member"===t.data&&n.push("/user"),[3,4];case 3:return r=s.sent(),console.error("Error checking authentication:",r),n.push("/login"),[3,4];case 4:return[2]}}))}));return function(){return e.apply(this,arguments)}}();e()}),[n]),(0,i.jsx)(i.Fragment,{children:t})}},64182:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return _}});var r=n(47568),s=n(97582),i=n(85893),o=n(67294),a=n(5121),c=n(41664),u=n.n(c),l=n(86886),d=n(50135),h=n(87109),f=n(66242),m=n(15861),p=n(44267),g=n(69417),x=n(86078),Z=n(22224),j=n(5616),v=n(94054),b=n(47312),k=n(18360),C=n(69497),y=n(83965),P=function(e){var t=e.imageUrl,n=e.title,r=e.stock,s=e.url,o=e.colors;return(0,i.jsxs)(f.Z,{children:[(0,i.jsx)(y.Z,{sx:{height:"14.5625rem"},image:t}),(0,i.jsxs)(p.Z,{children:[(0,i.jsx)(m.Z,{variant:"h6",sx:{marginBottom:2},children:n}),(0,i.jsx)(m.Z,{sx:{marginBottom:2},color:o,children:r})]}),(0,i.jsx)(u(),{href:s,children:(0,i.jsx)(g.Z,{variant:"contained",sx:{py:2.5,width:"100%",borderTopLeftRadius:0,borderTopRightRadius:0},children:"Add Stocks"})})]})},_=function(){var e=(0,o.useState)(""),t=e[0],n=e[1],c=(0,o.useState)([]),y=c[0],_=c[1],w=(0,o.useState)(6),S=w[0],M=w[1],E=(0,o.useState)(6),N=E[0],I=(E[1],(0,o.useState)(null)),R=I[0],T=I[1],A="undefined"!==typeof sessionStorage?sessionStorage.getItem("token"):null;(0,o.useEffect)((function(){z()}),[]),(0,o.useEffect)((function(){R&&clearTimeout(R);var e=setTimeout((function(){B()}),500);return T(e),function(){return clearTimeout(e)}}),[t]);var z=function(){var e=(0,r.Z)((function(){var e,t;return(0,s.__generator)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,a.Z.get("".concat("http://localhost:5000","/api/protected/cannabisProducts"),{headers:{Authorization:"Bearer ".concat(A)},withCredentials:!0})];case 1:return e=n.sent(),_(e.data),[3,3];case 2:return t=n.sent(),console.error("Error fetching data:",t),[3,3];case 3:return[2]}}))}));return function(){return e.apply(this,arguments)}}(),B=function(){var e=(0,r.Z)((function(){var e,n;return(0,s.__generator)(this,(function(r){switch(r.label){case 0:if(!(t.length>2))return[3,5];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,a.Z.get("".concat("http://localhost:5000","/api/protected/cannabisProducts?search=").concat(t),{headers:{Authorization:"Bearer ".concat(A)},withCredentials:!0})];case 2:return e=r.sent(),_(e.data),[3,4];case 3:return n=r.sent(),console.error("Error fetching search results:",n),[3,4];case 4:return[3,6];case 5:z(),r.label=6;case 6:return[2]}}))}));return function(){return e.apply(this,arguments)}}();return(0,i.jsx)(x.Z,{children:(0,i.jsxs)(l.ZP,{container:!0,spacing:6,children:[(0,i.jsx)(l.ZP,{item:!0,xs:6,children:(0,i.jsx)(m.Z,{variant:"h5",children:"Stocks"})}),(0,i.jsx)(l.ZP,{item:!0,xs:6,children:(0,i.jsx)(j.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-end"},children:(0,i.jsx)(u(),{href:"/products/add-product",passHref:!0,children:(0,i.jsx)(g.Z,{size:"large",color:"success",variant:"contained",children:"Add New Product"})})})}),(0,i.jsx)(l.ZP,{item:!0,xs:12,children:(0,i.jsx)(f.Z,{children:(0,i.jsx)(p.Z,{children:(0,i.jsxs)(l.ZP,{container:!0,spacing:5,children:[(0,i.jsx)(l.ZP,{item:!0,xs:6,children:(0,i.jsx)(d.Z,{fullWidth:!0,label:"Search Product",placeholder:"Product Name",value:t,onChange:function(e){return n(e.target.value)},InputProps:{startAdornment:(0,i.jsx)(h.Z,{position:"start",children:(0,i.jsx)(C.Z,{})})}})}),(0,i.jsx)(l.ZP,{item:!0,xs:6,children:(0,i.jsxs)(v.Z,{fullWidth:!0,children:[(0,i.jsx)(b.Z,{children:"Category"}),(0,i.jsx)(k.Z,{label:"Category",value:"",onChange:function(){},required:!0,children:(0,i.jsx)(Z.Z,{value:"",children:"Select"})})]})})]})})})}),y.length>0?y.slice(0,S).map((function(e){return(0,i.jsx)(l.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,i.jsx)(P,{imageUrl:(t=e.imageURL,t&&"string"===typeof t?t.replace(/\\/g,"/"):"/images/avatars/cannabis-product-default.jpg"),title:e.name,stock:e.stock?"".concat(e.stock," in stock"):"Out of stock",url:"/stocks/add/".concat(e._id),colors:e.stock?"success.main":"error"})},e._id);var t})):(0,i.jsx)(l.ZP,{item:!0,xs:12,children:(0,i.jsx)(m.Z,{variant:"body1",children:"No products found"})}),S<y.length&&(0,i.jsx)(l.ZP,{item:!0,xs:12,children:(0,i.jsx)(j.Z,{sx:{display:"flex",justifyContent:"center",mt:4},children:(0,i.jsx)(g.Z,{variant:"contained",onClick:function(){M((function(e){return e+N}))},children:"Load More"})})})]})})}}},function(e){e.O(0,[2657,7709,8360,3678,5345,9774,2888,179],(function(){return t=68498,e(e.s=t);var t}));var t=e.O();_N_E=t}]);