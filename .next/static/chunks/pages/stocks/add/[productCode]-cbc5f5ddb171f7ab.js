(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[143],{39218:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/stocks/add/[productCode]",function(){return r(23577)}])},86078:function(e,t,r){"use strict";var a=r(47568),s=r(97582),n=r(85893),i=r(11163),l=r(67294),u=r(5121);t.Z=function(e){var t=e.children,r=(0,i.useRouter)();return(0,l.useEffect)((function(){var e=function(){var e=(0,a.Z)((function(){var e,t,a;return(0,s.__generator)(this,(function(s){switch(s.label){case 0:if(!(e=sessionStorage.getItem("token")))return r.push("/login"),[2];s.label=1;case 1:return s.trys.push([1,3,,4]),[4,u.Z.get("".concat("http://localhost:5000","/api/public/user-type"),{headers:{Authorization:"Bearer ".concat(e)},withCredentials:!0})];case 2:return t=s.sent(),console.log(t.data),"false"===t.data?r.push("/login"):"member"===t.data&&r.push("/user"),[3,4];case 3:return a=s.sent(),console.error("Error checking authentication:",a),r.push("/login"),[3,4];case 4:return[2]}}))}));return function(){return e.apply(this,arguments)}}();e()}),[r]),(0,n.jsx)(n.Fragment,{children:t})}},23577:function(e,t,r){"use strict";r.r(t);var a=r(47568),s=r(97582),n=r(85893),i=r(67294),l=r(86078),u=r(87536),o=r(5121),c=(r(41664),r(11163)),h=r(86886),d=r(50135),p=r(66242),x=r(15861),g=r(78445),m=r(67720),f=r(44267),Z=r(69417),j=r(94054),v=r(18360),P=r(47312),b=r(22224),S=r(90948),y=r(5616),C=(0,S.ZP)("img")((function(e){var t=e.theme;return{width:180,height:180,marginRight:t.spacing(6.25),borderRadius:t.shape.borderRadius}}));t.default=function(){var e=(0,i.useState)(""),t=e[0],r=e[1],S=(0,i.useState)(""),W=S[0],T=S[1],_=(0,i.useState)(""),k=(_[0],_[1]),w=(0,i.useState)(""),N=(w[0],w[1],(0,i.useState)("first")),R=(N[0],N[1],(0,i.useState)("")),E=R[0],q=R[1],I=(0,i.useState)("/images/avatars/cannabis-product-default.jpg"),D=I[0],F=I[1],A=(0,i.useState)(null),B=A[0],G=A[1],z=(0,i.useState)(null),J=(z[0],z[1]),O=(0,i.useState)("0"),X=O[0],L=O[1],H=(0,i.useState)("0"),M=H[0],U=H[1],K=(0,i.useState)(""),Q=K[0],V=K[1],Y=(0,i.useState)(""),$=Y[0],ee=Y[1],te=(0,i.useState)("0"),re=te[0],ae=te[1],se=(0,i.useState)("0"),ne=se[0],ie=se[1],le=(0,i.useState)("0"),ue=le[0],oe=le[1],ce=(0,i.useState)("0"),he=ce[0],de=ce[1],pe=(0,i.useState)(""),xe=pe[0],ge=pe[1],me=(0,i.useState)(""),fe=me[0],Ze=me[1],je=(0,i.useState)(""),ve=je[0],Pe=je[1],be=(0,i.useState)(""),Se=be[0],ye=be[1],Ce=(0,i.useState)(""),We=Ce[0],Te=Ce[1],_e=(0,i.useState)(""),ke=_e[0],we=_e[1],Ne=(0,c.useRouter)(),Re="undefined"!==typeof sessionStorage?sessionStorage.getItem("token"):null,Ee=function(e,t){var r=isNaN(e)||isNaN(t)?0:e*t;ie(r)},qe=function(e,t){var r=isNaN(e)||isNaN(t)?0:e*t;de(r)},Ie=function(){var e=(0,a.Z)((function(e){var r;return(0,s.__generator)(this,(function(a){switch(a.label){case 0:if(e.preventDefault(),X<0||M<0||$<0||re<0||ue<0)return alert("Negative numbers are not allowed."),[2];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,o.Z.post("".concat("http://localhost:5000","/api/protected/addStocks"),{productId:t,amountPurchased:X,realWeight:M,growType:Q,jarWeight:$,purchasePrice:re,purchaseTotal:ne,dispensePrice:ue,dispenseTotal:he,sampleTaste:xe,frDisplay:fe,intStash:ve,exStash:Se,comments:We},{headers:{Authorization:"Bearer ".concat(Re)},withCredentials:!0})];case 2:return 201===a.sent().status?Ne.push("/stocks/products"):console.error("Failed to add stocks"),[3,4];case 3:return r=a.sent(),console.error("Error adding stocks:",r),[3,4];case 4:return[2]}}))}));return function(t){return e.apply(this,arguments)}}(),De=(0,u.cI)();De.register,De.handleSubmit,De.reset;return(0,i.useEffect)((function(){var e=function(){var e=(0,a.Z)((function(){var e,t,a;return(0,s.__generator)(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),(e=Ne.query.productCode)?(J(e),[4,o.Z.get("".concat("http://localhost:5000","/api/protected/cannabisProducts/").concat(e),{headers:{Authorization:"Bearer ".concat(Re)},withCredentials:!0})]):[2];case 1:return(t=s.sent()).data&&(G(t.data),r(t.data._id),T(t.data.name),k(t.data.category),q(t.data.salePrice),F("string"===typeof(n=t.data.imageURL)?""===n?"/images/avatars/cannabis-product-default.jpg":n.replace(/\\/g,"/"):(console.error("Image URL must be a string."),null)),we(t.data.stock)),[3,3];case 2:return a=s.sent(),console.error("Error fetching product data:",a),[3,3];case 3:return[2]}var n}))}));return function(){return e.apply(this,arguments)}}();e()}),[Ne.query.productCode]),B?(0,n.jsx)(l.Z,{children:(0,n.jsx)(h.ZP,{container:!0,spacing:6,children:(0,n.jsx)(h.ZP,{item:!0,xs:12,children:(0,n.jsxs)(p.Z,{sx:{p:4},children:[(0,n.jsx)(g.Z,{title:"Add Stocks",titleTypographyProps:{variant:"h6"}}),(0,n.jsxs)(f.Z,{children:[(0,n.jsxs)(y.Z,{sx:{display:"flex",alignItems:"center",pb:5},children:[(0,n.jsx)(C,{src:D,alt:"Profile Pic"}),(0,n.jsxs)(y.Z,{children:[(0,n.jsx)(x.Z,{variant:"h6",children:W}),(0,n.jsxs)(x.Z,{variant:"subtitle1",children:[" ","Current Sale Price: ",E?"".concat(E," token"):"Price not set"]}),(0,n.jsxs)(x.Z,{variant:"subtitle1",children:[" ","Current Stock: ",ke?"".concat(ke," grams"):"Out of stock"]})]})]}),(0,n.jsxs)("form",{onSubmit:Ie,children:[(0,n.jsxs)(h.ZP,{item:!0,xs:12,children:[(0,n.jsx)(h.ZP,{item:!0,xs:12,children:(0,n.jsx)(m.Z,{sx:{marginBottom:0}})}),(0,n.jsx)(x.Z,{variant:"body2",sx:{fontWeight:600,py:4},children:"Purchase Details"})]}),(0,n.jsxs)(h.ZP,{container:!0,spacing:6,children:[(0,n.jsx)(h.ZP,{item:!0,xs:6,children:(0,n.jsx)(d.Z,{fullWidth:!0,label:"Amount Purchased (grams)",type:"number",placeholder:"Amount Purchased (grams)",value:X,onChange:function(e){var t=parseFloat(e.target.value);L(t),Ee(t,re)},required:!0})}),(0,n.jsx)(h.ZP,{item:!0,xs:6,children:(0,n.jsx)(d.Z,{fullWidth:!0,label:"Real Weight",type:"number",placeholder:"Real Weight (grams)",value:M,onChange:function(e){var t=parseFloat(e.target.value);U(t),qe(t,ue)},required:!0})}),(0,n.jsx)(h.ZP,{item:!0,xs:6,children:(0,n.jsxs)(j.Z,{fullWidth:!0,children:[(0,n.jsx)(P.Z,{children:"Grow Type"}),(0,n.jsxs)(v.Z,{label:"Type",value:Q,onChange:function(e){return V(e.target.value)},required:!0,children:[(0,n.jsx)(b.Z,{value:"Exterior",children:"Exterior"}),(0,n.jsx)(b.Z,{value:"Interior",children:"Interior"}),(0,n.jsx)(b.Z,{value:"Hydro",children:"Hydro"})]})]})}),(0,n.jsx)(h.ZP,{item:!0,xs:6,children:(0,n.jsx)(d.Z,{fullWidth:!0,label:"Jar Weight",placeholder:"Jar Weight (grams)",value:$,type:"number",onChange:function(e){return ee(e.target.value)},required:!0})}),(0,n.jsxs)(h.ZP,{item:!0,xs:12,children:[(0,n.jsx)(h.ZP,{item:!0,xs:12,children:(0,n.jsx)(m.Z,{sx:{marginBottom:0}})}),(0,n.jsx)(x.Z,{variant:"body2",sx:{fontWeight:600,pt:4},children:"Price Details"})]}),(0,n.jsx)(h.ZP,{item:!0,xs:6,children:(0,n.jsx)(d.Z,{fullWidth:!0,label:"Purchase Price Per Gram",placeholder:"Purchase Total Per Gram (R)",type:"number",value:re,onChange:function(e){var t=parseFloat(e.target.value);ae(t),Ee(X,t)},required:!0})}),(0,n.jsx)(h.ZP,{item:!0,xs:6,alignContent:"center",children:(0,n.jsxs)(x.Z,{variant:"subtitle1",sx:{fontWeight:700},children:["Total Purchase Price: ",ne," R"]})}),(0,n.jsx)(h.ZP,{item:!0,xs:6,children:(0,n.jsx)(d.Z,{fullWidth:!0,label:"Dispense Price Per Gram",placeholder:"Dispense Total Per Gram (R)",type:"number",value:ue,onChange:function(e){var t=parseFloat(e.target.value);oe(t),qe(M,t)},required:!0})}),(0,n.jsx)(h.ZP,{item:!0,xs:6,alignContent:"center",children:(0,n.jsxs)(x.Z,{variant:"subtitle1",sx:{fontWeight:700},children:["Total Dispense Price: ",he," R"]})}),(0,n.jsxs)(h.ZP,{item:!0,xs:12,children:[(0,n.jsx)(h.ZP,{item:!0,xs:12,children:(0,n.jsx)(m.Z,{sx:{marginBottom:0}})}),(0,n.jsx)(x.Z,{variant:"body2",sx:{fontWeight:600,pt:4},children:"Movements"})]}),(0,n.jsx)(h.ZP,{item:!0,xs:3,children:(0,n.jsx)(d.Z,{fullWidth:!0,label:"Sample Taste",placeholder:"Sample Taste (grams)",type:"number",value:xe,onChange:function(e){return ge(e.target.value)},required:!0})}),(0,n.jsx)(h.ZP,{item:!0,xs:3,children:(0,n.jsx)(d.Z,{fullWidth:!0,label:"For Display Jar",placeholder:"For Display Jar (grams)",type:"number",value:fe,onChange:function(e){return Ze(e.target.value)},required:!0})}),(0,n.jsx)(h.ZP,{item:!0,xs:3,children:(0,n.jsx)(d.Z,{fullWidth:!0,label:"INT Stash",placeholder:"INT Stash (grams)",type:"number",value:ve,onChange:function(e){return Pe(e.target.value)},required:!0})}),(0,n.jsx)(h.ZP,{item:!0,xs:3,children:(0,n.jsx)(d.Z,{fullWidth:!0,label:"EXT Stash",placeholder:"EXT Stash (grams)",type:"number",value:Se,onChange:function(e){return ye(e.target.value)},required:!0})}),(0,n.jsx)(h.ZP,{item:!0,xs:12,children:(0,n.jsx)(d.Z,{fullWidth:!0,label:"Comments",placeholder:"Comments",multiline:!0,value:We,sx:{"& .MuiOutlinedInput-root":{alignItems:"baseline"}},minRows:3,onChange:function(e){return Te(e.target.value)}})}),(0,n.jsx)(h.ZP,{item:!0,xs:12,children:(0,n.jsx)(Z.Z,{size:"large",variant:"contained",sx:{marginBottom:7,marginRight:2},type:"submit",children:"Add Stocks"})})]})]})]})]})})})}):(0,n.jsx)("p",{children:"Loading..."})}}},function(e){e.O(0,[2657,7709,8360,3678,7364,8737,9774,2888,179],(function(){return t=39218,e(e.s=t);var t}));var t=e.O();_N_E=t}]);