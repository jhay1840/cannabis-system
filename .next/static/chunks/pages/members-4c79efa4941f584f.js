(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[483],{78445:function(e,r,t){"use strict";t.d(r,{Z:function(){return b}});var n=t(63366),a=t(87462),s=t(67294),i=t(63961),o=t(58510),c=t(15861),l=t(71657),u=t(90948),d=t(1977),h=t(8027);function p(e){return(0,h.ZP)("MuiCardHeader",e)}var m=(0,d.Z)("MuiCardHeader",["root","avatar","action","content","title","subheader"]),x=t(85893);const Z=["action","avatar","className","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"],f=(0,u.ZP)("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(e,r)=>(0,a.Z)({[`& .${m.title}`]:r.title,[`& .${m.subheader}`]:r.subheader},r.root)})({display:"flex",alignItems:"center",padding:16}),g=(0,u.ZP)("div",{name:"MuiCardHeader",slot:"Avatar",overridesResolver:(e,r)=>r.avatar})({display:"flex",flex:"0 0 auto",marginRight:16}),v=(0,u.ZP)("div",{name:"MuiCardHeader",slot:"Action",overridesResolver:(e,r)=>r.action})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),j=(0,u.ZP)("div",{name:"MuiCardHeader",slot:"Content",overridesResolver:(e,r)=>r.content})({flex:"1 1 auto"});var b=s.forwardRef((function(e,r){const t=(0,l.Z)({props:e,name:"MuiCardHeader"}),{action:s,avatar:u,className:d,component:h="div",disableTypography:m=!1,subheader:b,subheaderTypographyProps:y,title:w,titleTypographyProps:P}=t,C=(0,n.Z)(t,Z),N=(0,a.Z)({},t,{component:h,disableTypography:m}),S=(e=>{const{classes:r}=e;return(0,o.Z)({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},p,r)})(N);let _=w;null==_||_.type===c.Z||m||(_=(0,x.jsx)(c.Z,(0,a.Z)({variant:u?"body2":"h5",className:S.title,component:"span",display:"block"},P,{children:_})));let A=b;return null==A||A.type===c.Z||m||(A=(0,x.jsx)(c.Z,(0,a.Z)({variant:u?"body2":"body1",className:S.subheader,color:"text.secondary",component:"span",display:"block"},y,{children:A}))),(0,x.jsxs)(f,(0,a.Z)({className:(0,i.Z)(S.root,d),as:h,ref:r,ownerState:N},C,{children:[u&&(0,x.jsx)(g,{className:S.avatar,ownerState:N,children:u}),(0,x.jsxs)(j,{className:S.content,ownerState:N,children:[_,A]}),s&&(0,x.jsx)(v,{className:S.action,ownerState:N,children:s})]}))}))},86604:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/members",function(){return t(13714)}])},86078:function(e,r,t){"use strict";var n=t(47568),a=t(97582),s=t(85893),i=t(11163),o=t(67294),c=t(5121);r.Z=function(e){var r=e.children,t=(0,i.useRouter)();return(0,o.useEffect)((function(){var e=function(){var e=(0,n.Z)((function(){var e,r,n;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:if(!(e=sessionStorage.getItem("token")))return t.push("/login"),[2];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,c.Z.get("".concat("http://3.83.33.251:5000","/api/public/user-type"),{headers:{Authorization:"Bearer ".concat(e)},withCredentials:!0})];case 2:return r=a.sent(),console.log(r.data),"false"===r.data?t.push("/login"):"member"===r.data&&t.push("/user"),[3,4];case 3:return n=a.sent(),console.error("Error checking authentication:",n),t.push("/login"),[3,4];case 4:return[2]}}))}));return function(){return e.apply(this,arguments)}}();e()}),[t]),(0,s.jsx)(s.Fragment,{children:r})}},13714:function(e,r,t){"use strict";t.r(r);var n=t(47568),a=t(97582),s=t(85893),i=t(67294),o=t(5121),c=t(86886),l=t(50135),u=t(87109),d=t(66242),h=t(15861),p=t(78445),m=t(44267),x=t(69417),Z=t(86078),f=t(75787),g=t(69497);r.default=function(){var e=(0,i.useState)(""),r=e[0],t=e[1],v=(0,i.useState)(""),j=v[0],b=v[1],y=(0,i.useState)([]),w=(y[0],y[1],(0,i.useState)([])),P=w[0],C=w[1],N="undefined"!==typeof sessionStorage?sessionStorage.getItem("token"):null;(0,i.useEffect)((function(){var e=function(){var e=(0,n.Z)((function(){var e,r;return(0,a.__generator)(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,o.Z.get("".concat("http://3.83.33.251:5000","/api/protected/members"),{headers:{Authorization:"Bearer ".concat(N)},withCredentials:!0})];case 1:return e=t.sent(),C(e.data),[3,3];case 2:return r=t.sent(),console.error("Error fetching data:",r),[3,3];case 3:return[2]}}))}));return function(){return e.apply(this,arguments)}}();e()}),[]);var S=function(){var e=(0,n.Z)((function(e){var t,n;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:e.preventDefault(),a.label=1;case 1:return a.trys.push([1,6,,7]),""!==r.trim()?[3,3]:[4,o.Z.get("".concat("http://3.83.33.251:5000","/api/protected/members"),{headers:{Authorization:"Bearer ".concat(N)},withCredentials:!0})];case 2:return t=a.sent(),[3,5];case 3:return[4,o.Z.get("".concat("http://3.83.33.251:5000","/api/protected/members/search"),{params:{name:r},headers:{Authorization:"Bearer ".concat(N)},withCredentials:!0})];case 4:t=a.sent(),a.label=5;case 5:return C(t.data),b(""),[3,7];case 6:return n=a.sent(),console.error("Error while searching members:",n),[3,7];case 7:return[2]}}))}));return function(r){return e.apply(this,arguments)}}(),_=function(){var e=(0,n.Z)((function(e){var r,n;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:e.preventDefault(),a.label=1;case 1:return a.trys.push([1,6,,7]),""!==j.trim()?[3,3]:[4,o.Z.get("".concat("http://3.83.33.251:5000","/api/protected/members"),{headers:{Authorization:"Bearer ".concat(N)},withCredentials:!0})];case 2:return r=a.sent(),[3,5];case 3:return[4,o.Z.get("".concat("http://3.83.33.251:5000","/api/protected/members/searchbyid"),{params:{id:j},headers:{Authorization:"Bearer ".concat(N)},withCredentials:!0})];case 4:r=a.sent(),a.label=5;case 5:return C(r.data),t(""),[3,7];case 6:return n=a.sent(),console.error("Error while searching members:",n),[3,7];case 7:return[2]}}))}));return function(r){return e.apply(this,arguments)}}();return(0,s.jsx)(Z.Z,{children:(0,s.jsxs)(c.ZP,{container:!0,spacing:6,children:[(0,s.jsx)(c.ZP,{item:!0,xs:12,children:(0,s.jsx)(h.Z,{variant:"h5",children:"Members"})}),(0,s.jsx)(c.ZP,{item:!0,xs:12,children:(0,s.jsx)(d.Z,{children:(0,s.jsx)(m.Z,{children:(0,s.jsxs)(c.ZP,{container:!0,spacing:5,children:[(0,s.jsx)(c.ZP,{item:!0,xs:6,children:(0,s.jsxs)("form",{onSubmit:_,children:[(0,s.jsx)(l.Z,{fullWidth:!0,label:"SCAN CHIP/CARD",placeholder:"ID Number",value:j,onChange:function(e){return b(e.target.value)},InputProps:{startAdornment:(0,s.jsx)(u.Z,{position:"start",children:(0,s.jsx)(g.Z,{})})}}),(0,s.jsx)(x.Z,{type:"submit",variant:"contained",size:"large",sx:{mt:4},children:"Search by id"})]})}),(0,s.jsx)(c.ZP,{item:!0,xs:6,children:(0,s.jsxs)("form",{onSubmit:S,children:[(0,s.jsx)(l.Z,{fullWidth:!0,label:"Search",placeholder:"Name",value:r,onChange:function(e){return t(e.target.value)},InputProps:{startAdornment:(0,s.jsx)(u.Z,{position:"start",children:(0,s.jsx)(g.Z,{})})}}),(0,s.jsx)(x.Z,{type:"submit",variant:"contained",size:"large",sx:{mt:4},children:"Search by name"})]})}),(0,s.jsx)(c.ZP,{item:!0,xs:12})]})})})}),(0,s.jsx)(c.ZP,{item:!0,xs:12,children:(0,s.jsxs)(d.Z,{sx:{p:5},children:[(0,s.jsx)(p.Z,{title:"Members",titleTypographyProps:{variant:"h6"}}),(0,s.jsx)(f.Z,{data:P})]})})]})})}},75787:function(e,r,t){"use strict";var n=t(85893),a=t(67294),s=t(41664),i=t.n(s),o=t(90629),c=t(7906),l=t(53816),u=t(53184),d=t(295),h=t(98102),p=t(72882),m=t(70519),x=function(e){if(!e||isNaN(new Date(e)))return"";return new Date(e).toLocaleDateString(void 0,{year:"numeric",month:"numeric",day:"numeric"})},Z=function(e){var r=new Date(e),t=new Date,n=t.getFullYear()-r.getFullYear(),a=t.getMonth()-r.getMonth();return a<0||0===a&&t.getDate()<r.getDate()?n-1:n};r.Z=function(e){var r=e.data,t=(0,a.useState)(0),s=t[0],f=t[1],g=(0,a.useState)(5),v=g[0],j=g[1];if(!r||!Array.isArray(r)||0===r.length)return(0,n.jsx)("p",{children:"No data available."});var b=s>0?Math.max(0,(1+s)*v-r.length):0;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(p.Z,{component:o.Z,children:(0,n.jsxs)(c.Z,{sx:{minWidth:650},"aria-label":"simple table",children:[(0,n.jsx)(u.Z,{children:(0,n.jsxs)(l.Z,{children:[(0,n.jsx)(h.Z,{children:"ID"}),(0,n.jsx)(h.Z,{children:"First Name"}),(0,n.jsx)(h.Z,{children:"Last Name"}),(0,n.jsx)(h.Z,{children:"Credits"}),(0,n.jsx)(h.Z,{children:"Gender"}),(0,n.jsx)(h.Z,{children:"Registered"}),(0,n.jsx)(h.Z,{children:"Age"}),(0,n.jsx)(h.Z,{children:"ID Number"}),(0,n.jsx)(h.Z,{children:"User Role"}),(0,n.jsx)(h.Z,{children:"Email"}),(0,n.jsx)(h.Z,{children:"Expiry"})]})}),(0,n.jsxs)(d.Z,{children:[r.slice(s*v,s*v+v).map((function(e){var r,t,a;return(0,n.jsx)(i(),{href:"/members/profile/".concat(e.memberCode),passHref:!0,children:(0,n.jsxs)(l.Z,{component:"a",sx:{cursor:"pointer",textDecoration:"none","&:hover":{backgroundColor:"#f5f5f5"},"&:last-of-type td, &:last-of-type th":{border:0}},children:[(0,n.jsx)(h.Z,{component:"th",scope:"row",children:e.memberCode}),(0,n.jsx)(h.Z,{children:e.firstName}),(0,n.jsx)(h.Z,{children:e.lastName}),(0,n.jsx)(h.Z,{children:e.credits}),(0,n.jsx)(h.Z,{children:e.gender}),(0,n.jsx)(h.Z,{children:x(null===(r=e.userInfo[0])||void 0===r?void 0:r.createdAt)}),(0,n.jsx)(h.Z,{children:Z(e.dateOfBirth)}),(0,n.jsx)(h.Z,{children:e.idNumber}),(0,n.jsx)(h.Z,{children:null===(t=e.userInfo[0])||void 0===t?void 0:t.userRole}),(0,n.jsx)(h.Z,{children:null===(a=e.userInfo[0])||void 0===a?void 0:a.email}),(0,n.jsx)(h.Z,{children:x(e.expiryDate)})]})},e.memberCode)})),b>0&&(0,n.jsx)(l.Z,{style:{height:53*b},children:(0,n.jsx)(h.Z,{colSpan:11})})]})]})}),(0,n.jsx)(m.Z,{rowsPerPageOptions:[5,10,25],component:"div",count:r.length,rowsPerPage:v,page:s,onPageChange:function(e,r){f(r)},onRowsPerPageChange:function(e){j(parseInt(e.target.value,10)),f(0)}})]})}}},function(e){e.O(0,[2657,7709,8360,3678,9254,519,5345,9774,2888,179],(function(){return r=86604,e(e.s=r);var r}));var r=e.O();_N_E=r}]);