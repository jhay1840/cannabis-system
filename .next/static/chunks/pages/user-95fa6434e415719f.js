(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4235],{36847:function(t,e,n){"use strict";e.Z=void 0;var r,i=(r=n(65129))&&r.__esModule?r:{default:r};e.Z=(0,i.default)("M12,4A4,4 0 0,1 16,8A4,4 0 0,1 12,12A4,4 0 0,1 8,8A4,4 0 0,1 12,4M12,14C16.42,14 20,15.79 20,18V20H4V18C4,15.79 7.58,14 12,14Z","Account")},49032:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/user",function(){return n(60493)}])},15064:function(t,e,n){"use strict";var r=n(85893),i=n(90948),a=n(5616),s=(0,i.ZP)(a.Z)((function(t){return{height:"100vh","& .content-center":{display:"flex",minHeight:"100vh",alignItems:"center",justifyContent:"center",padding:t.theme.spacing(5)},"& .content-right":{display:"flex",minHeight:"100vh",overflowX:"hidden",position:"relative"}}}));e.Z=function(t){var e=t.children;return(0,r.jsx)(s,{className:"layout-wrapper",children:(0,r.jsx)(a.Z,{className:"app-content",sx:{minHeight:"100vh",overflowX:"hidden",position:"relative"},children:e})})}},60851:function(t,e,n){"use strict";n.d(e,{Z:function(){return I}});var r=n(47568),i=n(97582),a=n(85893),s=n(11163),o=n(67294),c=n(5121),u=n(61730),l=n(14924),d=n(26042),h=n(58032),g=n(90948),p=n(5616),f=n(26317),x=n(25193),v=n(50362),m=n(64232),Z=n(74397),j=n(25708),w=n(8745),y=(0,g.ZP)("div")({height:"100%",display:"flex"}),b=(0,g.ZP)(p.Z)({flexGrow:1,minWidth:0,display:"flex",minHeight:"100vh",flexDirection:"column"}),S=(0,g.ZP)("main")((function(t){var e=t.theme;return(0,l.Z)({flexGrow:1,width:"100%",padding:e.spacing(6),transition:"padding .25s ease-in-out"},e.breakpoints.down("sm"),{paddingLeft:e.spacing(4),paddingRight:e.spacing(4)})})),_=function(t){var e=t.settings,n=t.children,r=t.scrollToTop,i=e.contentWidth,s=x.Z.navigationSize,c=(0,o.useState)(!1),u=c[0],l=c[1],g=function(){return l(!u)};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(y,{className:"layout-wrapper",children:[(0,a.jsx)(m.Z,(0,d.Z)({navWidth:s,navVisible:u,setNavVisible:l,toggleNavVisibility:g},t)),(0,a.jsxs)(b,{className:"layout-content-wrapper",children:[(0,a.jsx)(v.Z,(0,d.Z)({toggleNavVisibility:g},t)),(0,a.jsx)(S,{className:"layout-page-content",sx:(0,d.Z)({},"boxed"===i&&{mx:"auto","@media (min-width:1440px)":{maxWidth:1440},"@media (min-width:1200px)":{maxWidth:"100%"}}),children:n}),(0,a.jsx)(Z.Z,(0,d.Z)({},t)),(0,a.jsx)(w.Z,{sx:{zIndex:11},children:(0,a.jsx)(p.Z,{id:"react-datepicker-portal"})})]})]}),r?r(t):(0,a.jsx)(j.Z,{className:"mui-fixed",children:(0,a.jsx)(h.Z,{color:"primary",size:"small","aria-label":"scroll back to top",children:(0,a.jsx)(f.Z,{})})})]})},N=n(36847),D=n(99238),k=function(){return[{title:"Dashboard",icon:D.Z,path:"/user/"},{title:"Profile",icon:N.Z,path:"/user/profile"}]},P=n(15045),E=n(88073),I=function(t){var e=t.children,n=(0,E.r)(),l=n.settings,d=n.saveSettings,h=(0,s.useRouter)(),g=(0,u.Z)((function(t){return t.breakpoints.down("lg")}));return(0,o.useEffect)((function(){var t=function(){var t=(0,r.Z)((function(){var t,e,n;return(0,i.__generator)(this,(function(r){switch(r.label){case 0:if(!(t=sessionStorage.getItem("token")))return h.push("/login"),[2];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,c.Z.get("".concat("http://3.83.33.251:5000","/api/public/user-type"),{headers:{Authorization:"Bearer ".concat(t)},withCredentials:!0})];case 2:return e=r.sent(),console.log(e.data),"member"!==e.data&&h.push("/login"),[3,4];case 3:return n=r.sent(),console.error("Error checking authentication:",n),h.push("/login"),[3,4];case 4:return[2]}}))}));return function(){return t.apply(this,arguments)}}();t()}),[h]),(0,a.jsx)(_,{hidden:g,settings:"boxed",saveSettings:d,verticalNavItems:k(),verticalAppBarContent:function(t){return(0,a.jsx)(P.Z,{hidden:g,settings:l,saveSettings:d,toggleNavVisibility:t.toggleNavVisibility})},children:e})}},60493:function(t,e,n){"use strict";n.r(e);var r=n(47568),i=n(97582),a=n(85893),s=n(67294),o=n(5121),c=n(41664),u=n.n(c),l=n(86886),d=n(15861),h=n(66242),g=n(44267),p=n(69417),f=n(90948),x=n(2734),v=(n(56077),n(86078),n(61238)),m=n(73119),Z=n(60851),j=n(15064),w=n(64895),y=(0,f.ZP)("img")({right:0,bottom:0,height:170,position:"absolute"}),b=(0,f.ZP)("img")({right:36,bottom:20,height:98,position:"absolute"}),S=function(){var t=(0,s.useState)([]),e=t[0],n=t[1],c=(0,s.useState)([]),f=c[0],j=c[1],S=(0,s.useState)(function(){var t=new Date,e=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return"".concat(e,"-").concat(n,"-").concat(r)}()),_=S[0],N=(S[1],(0,s.useState)("")),D=N[0],k=N[1],P=(0,s.useState)(""),E=(P[0],P[1],(0,s.useState)("")),I=E[0],A=E[1],C=(0,s.useState)(!0),V=C[0],z=C[1],O=(0,s.useState)(null),T=(O[0],O[1]),H=(0,s.useState)(""),B=H[0],W=H[1],F="light"===(0,x.Z)().palette.mode?"triangle-light.png":"triangle-dark.png",M="undefined"!==typeof sessionStorage?sessionStorage.getItem("token"):null;return(0,s.useEffect)((function(){var t=function(){var t=(0,r.Z)((function(){var t,e;return(0,i.__generator)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,3,4]),z(!0),[4,o.Z.get("".concat("http://3.83.33.251:5000","/api/protected/overview"),{headers:{Authorization:"Bearer ".concat(M)},withCredentials:!0})];case 1:return t=n.sent(),j(t.data),[3,4];case 2:return e=n.sent(),console.error("Error fetching overview data:",e),T("Failed to fetch overview data."),[3,4];case 3:return z(!1),[7];case 4:return[2]}}))}));return function(){return t.apply(this,arguments)}}(),e=function(){var t=(0,r.Z)((function(){var t,e,r,a,s,c,u,l,d,h,g,p;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),W("N/A"),A("/products"),k("0"),t=new Date(_),e=(7-t.getDay())%7,r=new Date(t.getTime()+24*e*60*60*1e3),a=r.toISOString().split("T")[0],(s=new Date(_)).setDate(s.getDate()-(s.getDay()+6)%7-42),c=s.toISOString().split("T")[0],[4,o.Z.get("".concat("http://3.83.33.251:5000","/api/protected/reports"),{params:{startDate:c,endDate:a},headers:{Authorization:"Bearer ".concat(M)},withCredentials:!0})];case 1:return u=i.sent(),n(u.data),l={},u.data.forEach((function(t){var e=t.startOfDayQty-t.endOfDayQty;l[t.productId]||(l[t.productId]={id:t.productId,name:t.name,usage:0}),l[t.productId].usage+=e})),(d=Object.values(l)).sort((function(t,e){return e.usage-t.usage})),h=d[0],g=d.reduce((function(t,e){return e===h?t+e.usage:t}),0),W(h.name),A(h.id),k(g.toFixed(0)),[3,3];case 2:return p=i.sent(),console.error("Error fetching barData:",p),[3,3];case 3:return[2]}}))}));return function(){return t.apply(this,arguments)}}();e(),t()}),[_]),V?(0,a.jsx)("div",{children:"Loading..."}):(0,a.jsx)(Z.Z,{children:(0,a.jsx)(w.Z,{children:(0,a.jsxs)(l.ZP,{container:!0,spacing:6,children:[(0,a.jsx)(l.ZP,{item:!0,xs:12,md:4,children:(0,a.jsx)(h.Z,{sx:{position:"relative"},children:(0,a.jsxs)(g.Z,{children:[(0,a.jsxs)(d.Z,{variant:"h6",children:[B," \ud83e\udd73"]}),(0,a.jsx)(d.Z,{variant:"body2",sx:{letterSpacing:"0.25px"},children:"Best seller for the past few weeks"}),(0,a.jsxs)(d.Z,{variant:"h5",sx:{my:4,color:"primary.main"},children:[D," gr"]}),(0,a.jsx)(u(),{href:"/products/".concat(I),passHref:!0,children:(0,a.jsx)(p.Z,{size:"small",variant:"contained",children:"View Product"})}),(0,a.jsx)(y,{alt:"triangle background",src:"/images/misc/".concat(F)}),(0,a.jsx)(b,{alt:"trophy",src:"/images/misc/trophy.png"})]})})}),(0,a.jsx)(l.ZP,{item:!0,xs:12,md:8,children:(0,a.jsx)(m.Z,{data:f})}),(0,a.jsx)(l.ZP,{item:!0,xs:12,children:(0,a.jsx)(v.Z,{data:e,closeDate:_})})]})})})};S.getLayout=function(t){return(0,a.jsx)(j.Z,{children:t})},e.default=S}},function(t){t.O(0,[2657,1181,8545,7622,9774,2888,179],(function(){return e=49032,t(t.s=e);var e}));var e=t.O();_N_E=e}]);