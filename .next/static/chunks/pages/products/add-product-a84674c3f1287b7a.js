(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3475],{92468:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/products/add-product",function(){return n(71459)}])},86078:function(e,t,n){"use strict";var r=n(47568),a=n(97582),i=n(85893),s=n(11163),u=n(67294),c=n(5121);t.Z=function(e){var t=e.children,n=(0,s.useRouter)();return(0,u.useEffect)((function(){var e=function(){var e=(0,r.Z)((function(){var e,t,r;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:if(!(e=sessionStorage.getItem("token")))return n.push("/login"),[2];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,c.Z.get("".concat("http://localhost:5000","/api/public/user-type"),{headers:{Authorization:"Bearer ".concat(e)},withCredentials:!0})];case 2:return t=a.sent(),console.log(t.data),"false"===t.data?n.push("/login"):"member"===t.data&&n.push("/user"),[3,4];case 3:return r=a.sent(),console.error("Error checking authentication:",r),n.push("/login"),[3,4];case 4:return[2]}}))}));return function(){return e.apply(this,arguments)}}();e()}),[n]),(0,i.jsx)(i.Fragment,{children:t})}},71459:function(e,t,n){"use strict";n.r(t);var r=n(47568),a=n(14924),i=n(97582),s=n(85893),u=n(67294),c=n(86078),l=n(87536),o=n(5121),d=n(11163),h=n.n(d),p=n(86886),f=n(50135),g=n(66242),x=n(15861),m=n(78445),Z=n(67720),v=n(44267),j=n(69417),b=n(94054),P=n(18360),C=n(47312),y=n(22224),w=n(90948),S=n(5616),_=(0,w.ZP)(j.Z)((function(e){var t=e.theme;return(0,a.Z)({},t.breakpoints.down("sm"),{width:"100%",textAlign:"center"})})),A=(0,w.ZP)("img")((function(e){var t=e.theme;return{width:120,height:120,marginRight:t.spacing(6.25),borderRadius:t.shape.borderRadius}})),I=(0,w.ZP)(j.Z)((function(e){var t=e.theme;return(0,a.Z)({marginLeft:t.spacing(4.5)},t.breakpoints.down("sm"),{width:"100%",marginLeft:0,textAlign:"center",marginTop:t.spacing(4)})}));t.default=function(){var e=(0,u.useState)(""),t=e[0],n=e[1],a=(0,u.useState)(""),d=a[0],w=a[1],B=(0,u.useState)(""),T=B[0],W=B[1],E=(0,u.useState)(""),k=E[0],N=E[1],D=(0,u.useState)(""),R=D[0],z=D[1],F=(0,u.useState)(""),M=F[0],O=F[1],q=(0,u.useState)(""),L=q[0],U=q[1],G=(0,u.useState)(""),H=G[0],V=G[1],X=(0,u.useState)(""),J=X[0],K=X[1],Q=(0,u.useState)(""),Y=Q[0],$=Q[1],ee=(0,u.useState)([]),te=ee[0],ne=ee[1],re=(0,u.useState)([]),ae=re[0],ie=re[1],se=(0,u.useState)(""),ue=se[0],ce=se[1],le=(0,u.useState)("first"),oe=le[0],de=le[1],he=(0,u.useState)(""),pe=he[0],fe=he[1],ge=(0,u.useState)(""),xe=ge[0],me=ge[1],Ze=(0,u.useState)("/images/avatars/cannabis-product-default.jpg"),ve=Ze[0],je=Ze[1],be="undefined"!==typeof sessionStorage?sessionStorage.getItem("token"):null,Pe=function(){var e=(0,r.Z)((function(e){var n,r,a;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:(n=new FormData).append("productImage",e),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,o.Z.post("".concat("http://localhost:5000","/api/protected/upload/product/").concat(t),n,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(be)},withCredentials:!0})];case 2:return r=i.sent(),console.log(r.data),""==r.data?[2,""]:[2,r.data];case 3:return a=i.sent(),console.error(a),[3,4];case 4:return[2]}}))}));return function(t){return e.apply(this,arguments)}}(),Ce=function(){var e=(0,r.Z)((function(e){var t,n;return(0,i.__generator)(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,Pe(ue)];case 1:return t=e.sent(),de(t),[3,3];case 2:return n=e.sent(),console.error(n),[3,3];case 3:return[2]}}))}));return function(t){return e.apply(this,arguments)}}();(0,u.useEffect)((function(){if("first"==oe)de="";else{var e=function(){var e=(0,r.Z)((function(){var e;return(0,i.__generator)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,o.Z.post("".concat("http://localhost:5000","/api/protected/addProduct"),{name:t,secondBreed:d,type:T,sativa:k,thc:R,cbd:M,cbn:L,description:H,medicalDescription:J,category:Y,productImageUrl:oe,salePrice:pe,costPrice:xe},{headers:{Authorization:"Bearer ".concat(be)},withCredentials:!0})];case 1:return 201===n.sent().status?h().push("/products"):console.error("Failed to add product"),[3,3];case 2:return e=n.sent(),console.error(e),[3,3];case 3:return[2]}}))}));return function(){return e.apply(this,arguments)}}();e()}}),[oe]),(0,u.useEffect)((function(){var e=function(){var e=(0,r.Z)((function(){var e,t,n;return(0,i.__generator)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,o.Z.get("".concat("http://localhost:5000","/api/protected/getCannabisCategories"),{headers:{Authorization:"Bearer ".concat(be)},withCredentials:!0})];case 1:return e=r.sent(),t=e.data,ne(t.categories),ie(t.types),[3,3];case 2:return n=r.sent(),console.error("Error fetching data:",n),[3,3];case 3:return[2]}}))}));return function(){return e.apply(this,arguments)}}();e()}),[]);var ye=(0,l.cI)(),we=(ye.register,ye.handleSubmit);ye.reset;return(0,s.jsx)(c.Z,{children:(0,s.jsx)(p.ZP,{container:!0,spacing:6,children:(0,s.jsx)(p.ZP,{item:!0,xs:12,children:(0,s.jsxs)(g.Z,{sx:{p:4},children:[(0,s.jsx)(m.Z,{title:"Add New Product",titleTypographyProps:{variant:"h6"}}),(0,s.jsx)(Z.Z,{sx:{margin:0}}),(0,s.jsxs)(v.Z,{children:[(0,s.jsxs)(S.Z,{sx:{display:"flex",alignItems:"center",pb:5},children:[(0,s.jsx)(A,{src:ve,alt:"Profile Pic"}),(0,s.jsxs)(S.Z,{children:[(0,s.jsxs)(_,{component:"label",variant:"contained",htmlFor:"new-product-upload-image",children:["Upload Product Image",(0,s.jsx)("input",{hidden:!0,type:"file",onChange:function(e){var t=new FileReader,n=e.target.files;n&&0!==n.length&&(t.onload=function(){return je(t.result)},t.readAsDataURL(n[0]),ce(n[0]))},accept:"image/png, image/jpeg",id:"new-product-upload-image",name:"productImage"})]}),(0,s.jsx)(I,{color:"error",variant:"outlined",onClick:function(){return je("/images/avatars/cannabis-product-default.jpg")},children:"Reset"}),(0,s.jsx)(x.Z,{variant:"body2",sx:{marginTop:5},children:"Allowed PNG or JPEG"})]})]}),(0,s.jsx)("form",{onSubmit:we(Ce),children:(0,s.jsxs)(p.ZP,{container:!0,spacing:6,children:[(0,s.jsx)(p.ZP,{item:!0,xs:6,children:(0,s.jsx)(f.Z,{fullWidth:!0,label:"Name",placeholder:"Product name",value:t,onChange:function(e){return n(e.target.value)},required:!0})}),(0,s.jsx)(p.ZP,{item:!0,xs:6,children:(0,s.jsx)(f.Z,{fullWidth:!0,label:"Second Breed",placeholder:"Second Breed",value:d,onChange:function(e){return w(e.target.value)}})}),(0,s.jsx)(p.ZP,{item:!0,xs:6,children:(0,s.jsxs)(b.Z,{fullWidth:!0,children:[(0,s.jsx)(C.Z,{children:"Type"}),(0,s.jsx)(P.Z,{label:"Type",value:T,onChange:function(e){return W(e.target.value)},required:!0,children:ae.map((function(e,t){return(0,s.jsx)(y.Z,{value:e,children:e},t)}))})]})}),(0,s.jsx)(p.ZP,{item:!0,xs:6,children:(0,s.jsxs)(b.Z,{fullWidth:!0,children:[(0,s.jsx)(C.Z,{children:"Category"}),(0,s.jsx)(P.Z,{label:"Category",value:Y,onChange:function(e){return $(e.target.value)},required:!0,children:te.map((function(e,t){return(0,s.jsx)(y.Z,{value:e,children:e},t)}))})]})}),(0,s.jsx)(p.ZP,{item:!0,xs:3,children:(0,s.jsx)(f.Z,{fullWidth:!0,label:"% SATIVA",placeholder:"% SATIVA",type:"number",value:k,onChange:function(e){return N(e.target.value)}})}),(0,s.jsx)(p.ZP,{item:!0,xs:3,children:(0,s.jsx)(f.Z,{fullWidth:!0,label:"% THC",placeholder:"% THC",type:"number",value:R,onChange:function(e){return z(e.target.value)}})}),(0,s.jsx)(p.ZP,{item:!0,xs:3,children:(0,s.jsx)(f.Z,{fullWidth:!0,label:"% CBD",placeholder:"% CBD",type:"number",value:M,onChange:function(e){return O(e.target.value)}})}),(0,s.jsx)(p.ZP,{item:!0,xs:3,children:(0,s.jsx)(f.Z,{fullWidth:!0,label:"% CBN",placeholder:"% CBN",type:"number",value:L,onChange:function(e){return U(e.target.value)}})}),(0,s.jsx)(p.ZP,{item:!0,xs:6,children:(0,s.jsx)(f.Z,{fullWidth:!0,label:"Description",placeholder:"Description",multiline:!0,value:H,sx:{"& .MuiOutlinedInput-root":{alignItems:"baseline"}},minRows:3,onChange:function(e){return V(e.target.value)}})}),(0,s.jsx)(p.ZP,{item:!0,xs:6,children:(0,s.jsx)(f.Z,{fullWidth:!0,label:"Medical Description",placeholder:"Medical Description",multiline:!0,value:J,sx:{"& .MuiOutlinedInput-root":{alignItems:"baseline"}},minRows:3,onChange:function(e){return K(e.target.value)}})}),(0,s.jsx)(p.ZP,{item:!0,xs:6,children:(0,s.jsx)(f.Z,{fullWidth:!0,label:"Sale Price",placeholder:"Sale Price",type:"number",value:pe,onChange:function(e){return fe(e.target.value)}})}),(0,s.jsx)(p.ZP,{item:!0,xs:6,children:(0,s.jsx)(f.Z,{fullWidth:!0,label:"Cost Price",placeholder:"Cost Price",type:"number",value:xe,onChange:function(e){return me(e.target.value)}})}),(0,s.jsx)(p.ZP,{item:!0,xs:12,children:(0,s.jsx)(j.Z,{size:"large",variant:"contained",sx:{marginBottom:7},type:"submit",children:"Add Product"})})]})})]})]})})})})}}},function(e){e.O(0,[2657,7709,8360,3678,7364,874,9774,2888,179],(function(){return t=92468,e(e.s=t);var t}));var t=e.O();_N_E=t}]);