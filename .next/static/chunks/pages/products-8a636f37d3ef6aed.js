(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7345],{83965:function(e,t,r){"use strict";r.d(t,{Z:function(){return Z}});var n=r(63366),i=r(87462),s=r(67294),a=r(63961),o=r(58510),c=r(71657),u=r(90948),d=r(1977),l=r(8027);function h(e){return(0,l.ZP)("MuiCardMedia",e)}(0,d.Z)("MuiCardMedia",["root","media","img"]);var f=r(85893);const m=["children","className","component","image","src","style"],p=(0,u.ZP)("div",{name:"MuiCardMedia",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e,{isMediaComponent:n,isImageComponent:i}=r;return[t.root,n&&t.media,i&&t.img]}})((({ownerState:e})=>(0,i.Z)({display:"block",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},e.isMediaComponent&&{width:"100%"},e.isImageComponent&&{objectFit:"cover"}))),g=["video","audio","picture","iframe","img"],x=["picture","img"];var Z=s.forwardRef((function(e,t){const r=(0,c.Z)({props:e,name:"MuiCardMedia"}),{children:s,className:u,component:d="div",image:l,src:Z,style:j}=r,v=(0,n.Z)(r,m),P=-1!==g.indexOf(d),b=!P&&l?(0,i.Z)({backgroundImage:`url("${l}")`},j):j,C=(0,i.Z)({},r,{component:d,isMediaComponent:P,isImageComponent:-1!==x.indexOf(d)}),y=(e=>{const{classes:t,isMediaComponent:r,isImageComponent:n}=e,i={root:["root",r&&"media",n&&"img"]};return(0,o.Z)(i,h,t)})(C);return(0,f.jsx)(p,(0,i.Z)({className:(0,a.Z)(y.root,u),as:d,role:!P&&l?"img":void 0,ref:t,style:b,ownerState:C,src:P?l||Z:void 0},v,{children:s}))}))},83308:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/products",function(){return r(65113)}])},86078:function(e,t,r){"use strict";var n=r(47568),i=r(97582),s=r(85893),a=r(11163),o=r(67294),c=r(5121);t.Z=function(e){var t=e.children,r=(0,a.useRouter)();return(0,o.useEffect)((function(){var e=function(){var e=(0,n.Z)((function(){var e,t,n;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:if(!(e=sessionStorage.getItem("token")))return r.push("/login"),[2];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,c.Z.get("".concat("http://3.83.33.251:5000","/api/public/user-type"),{headers:{Authorization:"Bearer ".concat(e)},withCredentials:!0})];case 2:return t=i.sent(),console.log(t.data),"false"===t.data?r.push("/login"):"member"===t.data&&r.push("/user"),[3,4];case 3:return n=i.sent(),console.error("Error checking authentication:",n),r.push("/login"),[3,4];case 4:return[2]}}))}));return function(){return e.apply(this,arguments)}}();e()}),[r]),(0,s.jsx)(s.Fragment,{children:t})}},65113:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return _}});var n=r(47568),i=r(97582),s=r(85893),a=r(67294),o=r(5121),c=r(41664),u=r.n(c),d=r(86886),l=r(50135),h=r(87109),f=r(66242),m=r(15861),p=r(44267),g=r(69417),x=r(86078),Z=r(22224),j=r(5616),v=r(94054),P=r(47312),b=r(18360),C=r(69497),y=r(83965),k=function(e){var t=e.imageUrl,r=e.title,n=e.colors,i=e.price,a=e.url,o=e.stock;return(0,s.jsxs)(f.Z,{children:[(0,s.jsx)(y.Z,{sx:{height:"14.5625rem"},image:t}),(0,s.jsxs)(p.Z,{children:[(0,s.jsx)(m.Z,{variant:"h6",sx:{marginBottom:2},children:r}),(0,s.jsx)(m.Z,{sx:{marginBottom:0},children:i}),(0,s.jsx)(m.Z,{variant:"body2",sx:{marginBottom:2},color:n,children:o})]}),(0,s.jsx)(u(),{href:a,children:(0,s.jsx)(g.Z,{variant:"contained",sx:{py:2.5,width:"100%",borderTopLeftRadius:0,borderTopRightRadius:0},children:"View Product"})})]})},_=function(){var e=(0,a.useState)(""),t=e[0],r=e[1],c=(0,a.useState)([]),y=c[0],_=c[1],w=(0,a.useState)(6),S=w[0],M=w[1],E=(0,a.useState)(6),N=E[0],I=(E[1],(0,a.useState)(null)),R=I[0],T=I[1],B="undefined"!==typeof sessionStorage?sessionStorage.getItem("token"):null;(0,a.useEffect)((function(){z()}),[]),(0,a.useEffect)((function(){R&&clearTimeout(R);var e=setTimeout((function(){A()}),500);return T(e),function(){return clearTimeout(e)}}),[t]);var z=function(){var e=(0,n.Z)((function(){var e,t;return(0,i.__generator)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,o.Z.get("".concat("http://3.83.33.251:5000","/api/protected/cannabisProducts"),{headers:{Authorization:"Bearer ".concat(B)},withCredentials:!0})];case 1:return e=r.sent(),_(e.data),[3,3];case 2:return t=r.sent(),console.error("Error fetching data:",t),[3,3];case 3:return[2]}}))}));return function(){return e.apply(this,arguments)}}(),A=function(){var e=(0,n.Z)((function(){var e,r;return(0,i.__generator)(this,(function(n){switch(n.label){case 0:if(!(t.length>2))return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,o.Z.get("".concat("http://3.83.33.251:5000","/api/protected/cannabisProducts?search=").concat(t),{headers:{Authorization:"Bearer ".concat(B)},withCredentials:!0})];case 2:return e=n.sent(),_(e.data),[3,4];case 3:return r=n.sent(),console.error("Error fetching search results:",r),[3,4];case 4:return[3,6];case 5:z(),n.label=6;case 6:return[2]}}))}));return function(){return e.apply(this,arguments)}}();return(0,s.jsx)(x.Z,{children:(0,s.jsxs)(d.ZP,{container:!0,spacing:6,children:[(0,s.jsx)(d.ZP,{item:!0,xs:6,children:(0,s.jsx)(m.Z,{variant:"h5",children:"Products"})}),(0,s.jsx)(d.ZP,{item:!0,xs:6,children:(0,s.jsx)(j.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-end"},children:(0,s.jsx)(u(),{href:"/products/add-product",passHref:!0,children:(0,s.jsx)(g.Z,{size:"large",color:"success",variant:"contained",children:"Add Products"})})})}),(0,s.jsx)(d.ZP,{item:!0,xs:12,children:(0,s.jsx)(f.Z,{children:(0,s.jsx)(p.Z,{children:(0,s.jsxs)(d.ZP,{container:!0,spacing:5,children:[(0,s.jsx)(d.ZP,{item:!0,xs:6,children:(0,s.jsx)(l.Z,{fullWidth:!0,label:"Search Product",placeholder:"Product Name",value:t,onChange:function(e){return r(e.target.value)},InputProps:{startAdornment:(0,s.jsx)(h.Z,{position:"start",children:(0,s.jsx)(C.Z,{})})}})}),(0,s.jsx)(d.ZP,{item:!0,xs:6,children:(0,s.jsxs)(v.Z,{fullWidth:!0,children:[(0,s.jsx)(P.Z,{children:"Category"}),(0,s.jsx)(b.Z,{label:"Category",value:"",onChange:function(){},required:!0,children:(0,s.jsx)(Z.Z,{value:"",children:"Select"})})]})})]})})})}),y.length>0?y.slice(0,S).map((function(e){return(0,s.jsx)(d.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,s.jsx)(k,{imageUrl:(t=e.imageURL,t&&"string"===typeof t?t.replace(/\\/g,"/"):"/images/avatars/cannabis-product-default.jpg"),title:e.name,price:e.salePrice?"".concat(e.salePrice," token"):"Price not set",url:"/products/".concat(e._id),stock:e.stock?"".concat(e.stock," in stock"):"Out of stock",colors:e.stock?"success.main":"error"})},e._id);var t})):(0,s.jsx)(d.ZP,{item:!0,xs:12,children:(0,s.jsx)(m.Z,{variant:"body1",children:"No products found"})}),S<y.length&&(0,s.jsx)(d.ZP,{item:!0,xs:12,children:(0,s.jsx)(j.Z,{sx:{display:"flex",justifyContent:"center",mt:4},children:(0,s.jsx)(g.Z,{variant:"contained",onClick:function(){M((function(e){return e+N}))},children:"Load More"})})})]})})}}},function(e){e.O(0,[2657,7709,8360,3678,5345,9774,2888,179],(function(){return t=83308,e(e.s=t);var t}));var t=e.O();_N_E=t}]);