(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6345],{56815:function(e,r,t){"use strict";t.d(r,{Z:function(){return j}});var n=t(63366),a=t(87462),i=t(67294),l=t(63961),s=t(58510),o=t(15704),u=t(74423),d=t(90948),c=t(98216),h=t(1977),f=t(8027);function m(e){return(0,f.ZP)("MuiFormHelperText",e)}var p,x=(0,h.Z)("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]),Z=t(71657),g=t(85893);const b=["children","className","component","disabled","error","filled","focused","margin","required","variant"],v=(0,d.ZP)("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(e,r)=>{const{ownerState:t}=e;return[r.root,t.size&&r[`size${(0,c.Z)(t.size)}`],t.contained&&r.contained,t.filled&&r.filled]}})((({theme:e,ownerState:r})=>(0,a.Z)({color:(e.vars||e).palette.text.secondary},e.typography.caption,{textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${x.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${x.error}`]:{color:(e.vars||e).palette.error.main}},"small"===r.size&&{marginTop:4},r.contained&&{marginLeft:14,marginRight:14})));var j=i.forwardRef((function(e,r){const t=(0,Z.Z)({props:e,name:"MuiFormHelperText"}),{children:i,className:d,component:h="p"}=t,f=(0,n.Z)(t,b),x=(0,u.Z)(),j=(0,o.Z)({props:t,muiFormControl:x,states:["variant","size","disabled","error","filled","focused","required"]}),y=(0,a.Z)({},t,{component:h,contained:"filled"===j.variant||"outlined"===j.variant,variant:j.variant,size:j.size,disabled:j.disabled,error:j.error,filled:j.filled,focused:j.focused,required:j.required}),P=(e=>{const{classes:r,contained:t,size:n,disabled:a,error:i,filled:l,focused:o,required:u}=e,d={root:["root",a&&"disabled",i&&"error",n&&`size${(0,c.Z)(n)}`,t&&"contained",o&&"focused",l&&"filled",u&&"required"]};return(0,s.Z)(d,m,r)})(y);return(0,g.jsx)(v,(0,a.Z)({as:h,ownerState:y,className:(0,l.Z)(P.root,d),ref:r},f,{children:" "===i?p||(p=(0,g.jsx)("span",{className:"notranslate",children:"\u200b"})):i}))}))},50135:function(e,r,t){"use strict";t.d(r,{Z:function(){return w}});var n=t(87462),a=t(63366),i=t(67294),l=t(63961),s=t(58510),o=t(89326),u=t(90948),d=t(71657),c=t(79332),h=t(6135),f=t(57709),m=t(47312),p=t(94054),x=t(56815),Z=t(18360),g=t(1977),b=t(8027);function v(e){return(0,b.ZP)("MuiTextField",e)}(0,g.Z)("MuiTextField",["root"]);var j=t(85893);const y=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],P={standard:c.Z,filled:h.Z,outlined:f.Z},C=(0,u.ZP)(p.Z,{name:"MuiTextField",slot:"Root",overridesResolver:(e,r)=>r.root})({});var w=i.forwardRef((function(e,r){const t=(0,d.Z)({props:e,name:"MuiTextField"}),{autoComplete:i,autoFocus:u=!1,children:c,className:h,color:f="primary",defaultValue:p,disabled:g=!1,error:b=!1,FormHelperTextProps:w,fullWidth:N=!1,helperText:k,id:R,InputLabelProps:F,inputProps:I,InputProps:T,inputRef:S,label:_,maxRows:W,minRows:z,multiline:M=!1,name:E,onBlur:q,onChange:D,onFocus:V,placeholder:B,required:O=!1,rows:L,select:A=!1,SelectProps:H,type:$,value:U,variant:X="outlined"}=t,Y=(0,a.Z)(t,y),G=(0,n.Z)({},t,{autoFocus:u,color:f,disabled:g,error:b,fullWidth:N,multiline:M,required:O,select:A,variant:X}),J=(e=>{const{classes:r}=e;return(0,s.Z)({root:["root"]},v,r)})(G);const K={};"outlined"===X&&(F&&"undefined"!==typeof F.shrink&&(K.notched=F.shrink),K.label=_),A&&(H&&H.native||(K.id=void 0),K["aria-describedby"]=void 0);const Q=(0,o.Z)(R),ee=k&&Q?`${Q}-helper-text`:void 0,re=_&&Q?`${Q}-label`:void 0,te=P[X],ne=(0,j.jsx)(te,(0,n.Z)({"aria-describedby":ee,autoComplete:i,autoFocus:u,defaultValue:p,fullWidth:N,multiline:M,name:E,rows:L,maxRows:W,minRows:z,type:$,value:U,id:Q,inputRef:S,onBlur:q,onChange:D,onFocus:V,placeholder:B,inputProps:I},K,T));return(0,j.jsxs)(C,(0,n.Z)({className:(0,l.Z)(J.root,h),disabled:g,error:b,fullWidth:N,ref:r,required:O,color:f,variant:X,ownerState:G},Y,{children:[null!=_&&""!==_&&(0,j.jsx)(m.Z,(0,n.Z)({htmlFor:Q,id:re},F,{children:_})),A?(0,j.jsx)(Z.Z,(0,n.Z)({"aria-describedby":ee,id:Q,labelId:re,value:U,input:ne},H,{children:c})):ne,k&&(0,j.jsx)(x.Z,(0,n.Z)({id:ee},w,{children:k}))]}))}))},50777:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/members/profile/edit/[memberCode]",function(){return t(55380)}])},86078:function(e,r,t){"use strict";var n=t(47568),a=t(97582),i=t(85893),l=t(11163),s=t(67294),o=t(5121);r.Z=function(e){var r=e.children,t=(0,l.useRouter)();return(0,s.useEffect)((function(){var e=function(){var e=(0,n.Z)((function(){var e,r,n;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:if(!(e=sessionStorage.getItem("token")))return t.push("/login"),[2];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,o.Z.get("".concat("http://3.83.33.251:5000","/api/public/user-type"),{headers:{Authorization:"Bearer ".concat(e)},withCredentials:!0})];case 2:return r=a.sent(),console.log(r.data),"false"===r.data?t.push("/login"):"member"===r.data&&t.push("/user"),[3,4];case 3:return n=a.sent(),console.error("Error checking authentication:",n),t.push("/login"),[3,4];case 4:return[2]}}))}));return function(){return e.apply(this,arguments)}}();e()}),[t]),(0,i.jsx)(i.Fragment,{children:r})}},55380:function(e,r,t){"use strict";t.r(r);var n=t(47568),a=t(14924),i=t(26042),l=t(69396),s=t(97582),o=t(85893),u=t(67294),d=t(5121),c=t(11163),h=t(41664),f=t.n(h),m=t(86886),p=t(50135),x=t(66242),Z=t(15861),g=t(44267),b=t(69417),v=t(5616),j=t(90948),y=t(18360),P=t(22224),C=t(50657),w=t(31425),N=t(6514),k=t(58951),R=t(37645),F=t(4026),I=t(86078),T=((0,j.ZP)("img")((function(e){var r=e.theme;return{width:150,height:150,marginRight:r.spacing(6.25),borderRadius:r.shape.borderRadius}})),(0,j.ZP)(b.Z)((function(e){var r=e.theme;return(0,a.Z)({},r.breakpoints.down("sm"),{width:"100%",textAlign:"center"})})),function(e){if(!e||isNaN(new Date(e)))return"";return new Date(e).toLocaleDateString(void 0,{year:"numeric",month:"numeric",day:"numeric"})}),S=function(e){var r=new Date(e),t=new Date,n=t.getFullYear()-r.getFullYear(),a=t.getMonth()-r.getMonth();return a<0||0===a&&t.getDate()<r.getDate()?n-1:n};r.default=function(){var e,r,t,h,j=(0,u.useState)([]),_=(j[0],j[1],(0,u.useState)([])),W=(_[0],_[1],(0,u.useState)([])),z=(W[0],W[1],(0,u.useState)("/images/avatars/1.png")),M=(z[0],z[1],(0,u.useState)(null)),E=M[0],q=M[1],D=(0,u.useState)(null),V=D[0],B=D[1],O=(0,u.useState)({}),L=O[0],A=O[1],H=(0,u.useState)(!1),$=H[0],U=H[1],X=(0,c.useRouter)(),Y=(0,u.useState)([]),G=Y[0],J=Y[1],K=(0,u.useState)([]),Q=K[0],ee=K[1],re="undefined"!==typeof sessionStorage?sessionStorage.getItem("token"):null,te=function(){var e=(0,n.Z)((function(){var e,r,t;return(0,s.__generator)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),e=X.query.memberCode,[4,d.Z.get("".concat("http://3.83.33.251:5000","/api/protected/members/").concat(e),{headers:{Authorization:"Bearer ".concat(re)},withCredentials:!0})];case 1:return(r=n.sent()).data&&r.data.length>0&&(q(r.data[0]),A(r.data[0]),B(e)),[3,3];case 2:return t=n.sent(),console.error("Error fetching member data:",t),[3,3];case 3:return[2]}}))}));return function(){return e.apply(this,arguments)}}();(0,u.useEffect)((function(){X.query.memberCode&&te()}),[X.query.memberCode]);var ne=function(e){var r=e.target,t=r.name,n=r.value;A((0,l.Z)((0,i.Z)({},L),(0,a.Z)({},t,n)))},ae=function(e){var r=e.target,t=r.name,n=r.value;A((0,l.Z)((0,i.Z)({},L),(0,a.Z)({},t,n)))},ie=function(){var e=(0,n.Z)((function(){var e,r;return(0,s.__generator)(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,d.Z.put("".concat("http://3.83.33.251:5000","/api/protected/memberUpdate/").concat(V),L,{headers:{Authorization:"Bearer ".concat(re)},withCredentials:!0})];case 1:return e=t.sent(),console.log("Changes saved successfully:",e.data),X.push("/members/profile/".concat(V)),[3,3];case 2:return r=t.sent(),console.error("Error saving changes:",r),[3,3];case 3:return[2]}}))}));return function(){return e.apply(this,arguments)}}(),le=function(){var e=(0,n.Z)((function(){var e;return(0,s.__generator)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,d.Z.delete("".concat("http://3.83.33.251:5000","/api/protected/deleteMember/").concat(V),{headers:{Authorization:"Bearer ".concat(re)},withCredentials:!0})];case 1:return r.sent(),console.log("Member deleted successfully"),U(!1),X.push("/members"),[3,3];case 2:return e=r.sent(),console.error("Error deleting member:",e),[3,3];case 3:return[2]}}))}));return function(){return e.apply(this,arguments)}}(),se=function(){U(!1)};return(0,u.useEffect)((function(){var e=function(){var e=(0,n.Z)((function(){var e,r,t;return(0,s.__generator)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,d.Z.get("".concat("http://3.83.33.251:5000","/api/protected/getMemberOptions"),{headers:{Authorization:"Bearer ".concat(re)},withCredentials:!0})];case 1:return e=n.sent(),r=e.data,J(r.idTypes),ee(r.estimatedConsumption),[3,3];case 2:return t=n.sent(),console.error("Error fetching data:",t),[3,3];case 3:return[2]}}))}));return function(){return e.apply(this,arguments)}}();e()}),[]),E?(0,o.jsxs)(I.Z,{children:[(0,o.jsx)(m.ZP,{container:!0,spacing:6,children:(0,o.jsx)(m.ZP,{item:!0,xs:12,children:(0,o.jsx)(x.Z,{sx:{p:5},children:(0,o.jsx)(g.Z,{children:(0,o.jsxs)(m.ZP,{container:!0,spacing:5,children:[(0,o.jsx)(m.ZP,{item:!0,xs:12,children:(0,o.jsx)(Z.Z,{variant:"h5",children:"Personal Information"})}),(0,o.jsx)(m.ZP,{item:!0,xs:6,sx:{marginTop:4.8,marginBottom:3},children:(0,o.jsxs)(v.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,o.jsx)(F.Z,{qrLink:"/members/profile/".concat(V)}),(0,o.jsxs)(v.Z,{children:[(0,o.jsxs)(Z.Z,{variant:"h6",children:[L.firstName," ",L.lastName]}),(0,o.jsxs)(Z.Z,{variant:"subtitle1",children:["Credits: ",L.credits]}),(0,o.jsxs)(Z.Z,{variant:"body2",children:[S(L.dateOfBirth)," y.o"]})]})]})}),(0,o.jsx)(m.ZP,{item:!0,xs:6,sx:{marginTop:4.8,marginBottom:3},children:(0,o.jsxs)(v.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-end"},children:[(0,o.jsx)(f(),{href:"/members/profile/".concat(V),passHref:!0,children:(0,o.jsx)(b.Z,{size:"large",variant:"outlined",children:"Cancel"})}),(0,o.jsx)(b.Z,{sx:{ml:5},size:"large",color:"error",variant:"contained",onClick:function(){U(!0)},children:"Delete Member"})]})}),(0,o.jsx)(m.ZP,{item:!0,xs:6,children:(0,o.jsx)(p.Z,{fullWidth:!0,label:"First Name",defaultValue:L.firstName,onChange:ne,name:"firstName"})}),(0,o.jsx)(m.ZP,{item:!0,xs:6,children:(0,o.jsx)(p.Z,{fullWidth:!0,label:"Last Name",defaultValue:L.lastName,onChange:ne,name:"lastName"})}),(0,o.jsx)(m.ZP,{item:!0,xs:6,children:(0,o.jsx)(p.Z,{fullWidth:!0,label:"Member Code",defaultValue:L.memberCode,InputProps:{readOnly:!0,style:{backgroundColor:"#f5f5f5"}}})}),(0,o.jsx)(m.ZP,{item:!0,xs:6,children:(0,o.jsx)(p.Z,{fullWidth:!0,label:"Expiry",type:"date",defaultValue:L.expiryDate?L.expiryDate.split("T")[0]:"",InputLabelProps:{shrink:!0},onChange:ne,name:"expiryDate"})}),(0,o.jsx)(m.ZP,{item:!0,xs:6,children:(0,o.jsx)(p.Z,{fullWidth:!0,label:"Email",defaultValue:null===(e=L.userInfo[0])||void 0===e?void 0:e.email,InputProps:{readOnly:!0,style:{backgroundColor:"#f5f5f5"}}})}),(0,o.jsx)(m.ZP,{item:!0,xs:6,children:(0,o.jsx)(p.Z,{fullWidth:!0,label:"User Role",defaultValue:null===(r=L.userInfo[0])||void 0===r?void 0:r.userRole,InputProps:{readOnly:!0,style:{backgroundColor:"#f5f5f5"}}})}),(0,o.jsx)(m.ZP,{item:!0,xs:6,children:(0,o.jsx)(p.Z,{fullWidth:!0,label:"Preferred Name",defaultValue:null===(t=L.userInfo[0])||void 0===t?void 0:t.userName,onChange:ne,name:"userName",InputProps:{readOnly:!0,style:{backgroundColor:"#f5f5f5"}}})}),(0,o.jsx)(m.ZP,{item:!0,xs:6,children:(0,o.jsx)(p.Z,{fullWidth:!0,label:"Phone Number",defaultValue:L.phoneNumber,onChange:ne,name:"phoneNumber"})}),(0,o.jsx)(m.ZP,{item:!0,xs:6,children:(0,o.jsx)(p.Z,{fullWidth:!0,label:"Registration Date",defaultValue:T(null===(h=L.userInfo[0])||void 0===h?void 0:h.createdAt),InputProps:{readOnly:!0,style:{backgroundColor:"#f5f5f5"}}})}),(0,o.jsx)(m.ZP,{item:!0,xs:6,children:(0,o.jsx)(p.Z,{fullWidth:!0,label:"Nationality",defaultValue:L.nationality,onChange:ne,name:"nationality"})}),(0,o.jsx)(m.ZP,{item:!0,xs:6,children:(0,o.jsx)(y.Z,{fullWidth:!0,value:L.idType,onChange:ae,name:"idType",displayEmpty:!0,children:G.map((function(e,r){return(0,o.jsx)(P.Z,{value:e,children:e},r)}))})}),(0,o.jsx)(m.ZP,{item:!0,xs:6,children:(0,o.jsx)(p.Z,{fullWidth:!0,label:"ID Number",defaultValue:L.idNumber,onChange:ne,name:"idNumber"})}),(0,o.jsx)(m.ZP,{item:!0,xs:6,children:(0,o.jsx)(p.Z,{fullWidth:!0,label:"Date of Birth",defaultValue:T(L.dateOfBirth),InputProps:{readOnly:!0,style:{backgroundColor:"#f5f5f5"}}})}),(0,o.jsx)(m.ZP,{item:!0,xs:6,children:(0,o.jsxs)(y.Z,{fullWidth:!0,value:L.gender,onChange:ae,name:"gender",displayEmpty:!0,children:[(0,o.jsx)(P.Z,{value:"male",children:"Male"}),(0,o.jsx)(P.Z,{value:"female",children:"Female"}),(0,o.jsx)(P.Z,{value:"other",children:"Other"})]})}),(0,o.jsx)(m.ZP,{item:!0,xs:6,children:(0,o.jsx)(y.Z,{fullWidth:!0,value:L.consumption,onChange:ae,name:"consumption",displayEmpty:!0,children:Q.map((function(e,r){return(0,o.jsx)(P.Z,{value:e,children:e},r)}))})}),(0,o.jsx)(m.ZP,{item:!0,xs:6,children:(0,o.jsx)(p.Z,{fullWidth:!0,label:"Last Update",defaultValue:L.updatedAt,InputProps:{readOnly:!0,style:{backgroundColor:"#f5f5f5"}}})}),(0,o.jsx)(m.ZP,{item:!0,xs:12,sx:{display:"flex",justifyContent:"flex-start"},children:(0,o.jsx)(b.Z,{size:"large",color:"success",variant:"contained",onClick:ie,children:"Save Changes"})})]})})})})}),(0,o.jsxs)(C.Z,{open:$,onClose:se,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,o.jsx)(R.Z,{id:"alert-dialog-title",children:"Delete Member"}),(0,o.jsx)(N.Z,{children:(0,o.jsx)(k.Z,{id:"alert-dialog-description",children:"Are you sure you want to delete this member? This action cannot be undone."})}),(0,o.jsxs)(w.Z,{children:[(0,o.jsx)(b.Z,{onClick:se,color:"primary",children:"Cancel"}),(0,o.jsx)(b.Z,{onClick:le,color:"error",variant:"contained",children:"Delete"})]})]})]}):(0,o.jsx)("p",{children:"Loading..."})}},4026:function(e,r,t){"use strict";var n=t(85893),a=t(59496);r.Z=function(e){var r=e.qrLink,t=(0,a.y)().Canvas;return(0,n.jsx)(t,{text:r,options:{level:"M",margin:3,scale:4,width:200,color:{dark:"#000000",light:"#ffffff"}}})}}},function(e){e.O(0,[2657,7709,8360,3678,7028,46,9774,2888,179],(function(){return r=50777,e(e.s=r);var r}));var r=e.O();_N_E=r}]);