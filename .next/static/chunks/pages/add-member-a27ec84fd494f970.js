(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4672],{76278:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/add-member",function(){return r(75411)}])},86078:function(e,t,r){"use strict";var n=r(47568),a=r(97582),s=r(85893),i=r(11163),l=r(67294),o=r(5121);t.Z=function(e){var t=e.children,r=(0,i.useRouter)();return(0,l.useEffect)((function(){var e=function(){var e=(0,n.Z)((function(){var e,t,n;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:if(!(e=sessionStorage.getItem("token")))return r.push("/login"),[2];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,o.Z.get("".concat("http://localhost:5000","/api/public/user-type"),{headers:{Authorization:"Bearer ".concat(e)},withCredentials:!0})];case 2:return t=a.sent(),console.log(t.data),"false"===t.data?r.push("/login"):"member"===t.data&&r.push("/user"),[3,4];case 3:return n=a.sent(),console.error("Error checking authentication:",n),r.push("/login"),[3,4];case 4:return[2]}}))}));return function(){return e.apply(this,arguments)}}();e()}),[r]),(0,s.jsx)(s.Fragment,{children:t})}},75411:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return W}});var n=r(47568),a=r(14924),s=r(97582),i=r(85893),l=r(67294),o=r(86078),u=r(58877),c=r.n(u),d=function(e){var t=e.onSignatureSave,r=(0,l.useRef)(null);return(0,i.jsxs)("div",{children:[(0,i.jsx)(c(),{ref:r,canvasProps:{width:500,height:250,className:"signatureCanvas",style:{backgroundColor:"#f5f5f5",height:"250px"}}}),(0,i.jsxs)("div",{children:[(0,i.jsx)("button",{onClick:function(e){e.preventDefault();var n=r.current.toDataURL();t(n)},style:{margin:"5px"},children:"Save Signature"}),(0,i.jsx)("button",{onClick:function(e){e.preventDefault(),r.current.clear()},style:{margin:"5px"},children:"Reset Signature"})]})]})},h=r(90948),p=r(69417),m=((0,h.ZP)(p.Z)((function(e){var t=e.theme;return(0,a.Z)({},t.breakpoints.down("sm"),{width:"100%",textAlign:"center"})})),r(87536)),x=r(5121),f=r(86886),g=r(50135),Z=r(87109),j=r(66242),v=r(15861),b=r(78445),y=r(67720),P=r(44267),S=r(94054),w=r(18360),C=r(47312),k=r(22224),B=r(60856),_=r(69368),N=r(11163),A=r.n(N),W=((0,h.ZP)(p.Z)((function(e){var t=e.theme;return(0,a.Z)({},t.breakpoints.down("sm"),{width:"100%",textAlign:"center"})})),function(){var e=(0,l.useState)(""),t=e[0],r=e[1],a=(0,l.useState)(""),u=a[0],c=a[1],h=(0,l.useState)(""),N=h[0],W=h[1],D=(0,l.useState)(""),I=D[0],q=D[1],E=(0,l.useState)(""),T=E[0],R=E[1],M=(0,l.useState)(""),z=M[0],O=M[1],U=(0,l.useState)(""),F=U[0],V=U[1],G=(0,l.useState)(""),J=G[0],L=G[1],X=(0,l.useState)(null),H=X[0],K=X[1],Q=(0,l.useState)(""),Y=Q[0],$=Q[1],ee=(0,l.useState)(""),te=ee[0],re=ee[1],ne=(0,l.useState)(!1),ae=ne[0],se=ne[1],ie=(0,l.useState)(!1),le=ie[0],oe=ie[1],ue=(0,l.useState)(!1),ce=ue[0],de=ue[1],he=(0,l.useState)(""),pe=he[0],me=he[1],xe=(0,l.useState)([]),fe=xe[0],ge=xe[1],Ze=(0,l.useState)([]),je=Ze[0],ve=Ze[1],be=(0,l.useState)(""),ye=be[0],Pe=be[1],Se=(0,l.useState)(""),we=Se[0],Ce=Se[1],ke="undefined"!==typeof sessionStorage?sessionStorage.getItem("token"):null,Be=(0,m.cI)(),_e=(Be.register,Be.handleSubmit),Ne=(Be.formState.errors,function(){var e=(0,n.Z)((function(e){return(0,s.__generator)(this,(function(t){return K(e),[2]}))}));return function(t){return e.apply(this,arguments)}}()),Ae=function(){var e=(0,n.Z)((function(e,r){var n,a,i,l,o,c,d,h;return(0,s.__generator)(this,(function(e){switch(e.label){case 0:return r.preventDefault(),H||"member"!=Y?(n={email:N},[4,x.Z.post("".concat("http://localhost:5000","/api/protected/check_email"),n,{headers:{Authorization:"Bearer ".concat(ke)},withCredentials:!0})]):(alert("Signature image is missing. Please save the signature first."),[2]);case 1:return 204!==e.sent().status?[3,2]:(q("Email already exists"),window.scrollTo({top:0,behavior:"smooth"}),[2]);case 2:return e.trys.push([2,8,,9]),a={firstName:t,lastName:u,email:N,phone:T,preferredName:z,dateOfBirth:F,idOrPassportNumber:J,userRole:Y,gender:te,subscribeToNewsletter:le,receiveUpdates:ae,nationality:ye,agreement:ce,idType:pe,consumption:we},[4,x.Z.post("".concat("http://localhost:5000","/api/protected/register"),a,{headers:{Authorization:"Bearer ".concat(ke)},withCredentials:!0})];case 3:return i=e.sent(),l=i.data.id,201!==i.status?[3,6]:H?(o=new FormData,c=We(H),o.append("upload",c,"signature.png"),[4,x.Z.post("".concat("http://localhost:5000","/api/upload/signature/").concat(l),o,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(ke)},withCredentials:!0})]):[3,5];case 4:e.sent(),e.label=5;case 5:return console.log("Account created successfully:",i.data),d=i.data.memberCode,A().push("/members/profile/".concat(d)),[3,7];case 6:console.error("User creation failed:",i.data),e.label=7;case 7:return[3,9];case 8:return h=e.sent(),console.error("Error during account creation:",h),[3,9];case 9:return[2]}}))}));return function(t,r){return e.apply(this,arguments)}}(),We=function(e){for(var t=atob(e.split(",")[1]),r=e.split(",")[0].split(":")[1].split(";")[0],n=new ArrayBuffer(t.length),a=new Uint8Array(n),s=0;s<t.length;s++)a[s]=t.charCodeAt(s);return new Blob([n],{type:r})};return(0,l.useEffect)((function(){var e=function(){var e=(0,n.Z)((function(){var e,t,r;return(0,s.__generator)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,x.Z.get("".concat("http://localhost:5000","/api/protected/getMemberOptions"),{headers:{Authorization:"Bearer ".concat(ke)},withCredentials:!0})];case 1:return e=n.sent(),t=e.data,ge(t.idTypes),ve(t.estimatedConsumption),[3,3];case 2:return r=n.sent(),console.error("Error fetching data:",r),[3,3];case 3:return[2]}}))}));return function(){return e.apply(this,arguments)}}();e()}),[]),(0,i.jsx)(o.Z,{children:(0,i.jsx)(f.ZP,{container:!0,spacing:6,children:(0,i.jsx)(f.ZP,{item:!0,xs:12,children:(0,i.jsxs)(j.Z,{sx:{p:4},children:[(0,i.jsx)(b.Z,{title:"Add New Member",titleTypographyProps:{variant:"h6"}}),(0,i.jsx)(y.Z,{sx:{margin:0}}),(0,i.jsx)(P.Z,{children:(0,i.jsxs)("form",{onSubmit:_e(Ae),children:[(0,i.jsx)(f.ZP,{item:!0,xs:12,children:(0,i.jsx)(v.Z,{variant:"body2",sx:{fontWeight:600,pb:4},children:"1. Account Details"})}),(0,i.jsxs)(f.ZP,{container:!0,spacing:6,children:[(0,i.jsx)(f.ZP,{item:!0,xs:6,children:(0,i.jsx)(g.Z,{fullWidth:!0,label:"First Name",placeholder:"John",value:t,onChange:function(e){return r(e.target.value)},required:!0})}),(0,i.jsx)(f.ZP,{item:!0,xs:6,children:(0,i.jsx)(g.Z,{fullWidth:!0,label:"Last Name",placeholder:"Doe",value:u,onChange:function(e){return c(e.target.value)},required:!0})}),(0,i.jsxs)(f.ZP,{item:!0,xs:6,children:[(0,i.jsx)(g.Z,{fullWidth:!0,label:"Email",placeholder:"john@example.com",value:N,onChange:function(e){return W(e.target.value)},required:!0}),I&&(0,i.jsx)("div",{style:{color:"red"},children:I})]}),(0,i.jsx)(f.ZP,{item:!0,xs:6,children:(0,i.jsx)(g.Z,{fullWidth:!0,label:"Phone",type:"number",placeholder:"+1-123-456-8790",value:T,onChange:function(e){return R(e.target.value)},required:!0})}),(0,i.jsx)(f.ZP,{item:!0,xs:6,children:(0,i.jsx)(g.Z,{fullWidth:!0,label:"Preferred Name",placeholder:"Johnny",value:z,onChange:function(e){return O(e.target.value)},required:!0})}),(0,i.jsx)(f.ZP,{item:!0,xs:6,children:(0,i.jsx)(g.Z,{fullWidth:!0,label:"Date of Birth",type:"date",value:F,onChange:function(e){return V(e.target.value)},InputProps:{startAdornment:(0,i.jsx)(Z.Z,{position:"start"})},required:!0})}),(0,i.jsx)(f.ZP,{item:!0,xs:6,children:(0,i.jsxs)(S.Z,{fullWidth:!0,children:[(0,i.jsx)(C.Z,{children:"Gender"}),(0,i.jsxs)(w.Z,{label:"Gender",value:te,onChange:function(e){return re(e.target.value)},required:!0,children:[(0,i.jsx)(k.Z,{value:"male",children:"Male"}),(0,i.jsx)(k.Z,{value:"female",children:"Female"}),(0,i.jsx)(k.Z,{value:"other",children:"Other"})]})]})}),(0,i.jsx)(f.ZP,{item:!0,xs:6,children:(0,i.jsx)(g.Z,{fullWidth:!0,label:"Nationality",placeholder:"Nationality",value:ye,onChange:function(e){return Pe(e.target.value)},required:!0})}),(0,i.jsx)(f.ZP,{item:!0,xs:6,children:(0,i.jsxs)(S.Z,{fullWidth:!0,children:[(0,i.jsx)(C.Z,{id:"form-layouts-separator-select-label",children:"ID Type"}),(0,i.jsx)(w.Z,{label:"Role",defaultValue:"ID",id:"form-layouts-separator-select",labelId:"form-layouts-separator-select-label",value:pe,onChange:function(e){return me(e.target.value)},required:!0,children:fe.map((function(e,t){return(0,i.jsx)(k.Z,{value:e,children:e},t)}))})]})}),(0,i.jsx)(f.ZP,{item:!0,xs:6,children:(0,i.jsx)(g.Z,{fullWidth:!0,label:"Please add your [ID] number here",placeholder:"Please add your [ID] number here",value:J,onChange:function(e){return L(e.target.value)},required:!0})}),(0,i.jsx)(f.ZP,{item:!0,xs:6,children:(0,i.jsxs)(S.Z,{fullWidth:!0,children:[(0,i.jsx)(C.Z,{id:"form-layouts-separator-select-label",children:"User Role"}),(0,i.jsxs)(w.Z,{label:"Role",defaultValue:"member",id:"form-layouts-separator-select",labelId:"form-layouts-separator-select-label",value:Y,onChange:function(e){return $(e.target.value)},required:!0,children:[(0,i.jsx)(k.Z,{value:"member",children:"Member"}),(0,i.jsx)(k.Z,{value:"admin",children:"Admin"})]})]})}),(0,i.jsx)(f.ZP,{item:!0,xs:6,children:(0,i.jsxs)(S.Z,{fullWidth:!0,children:[(0,i.jsx)(C.Z,{id:"form-layouts-separator-select-label",children:"What is your estimated consumption from Born High per month?"}),(0,i.jsx)(w.Z,{label:"Role",defaultValue:"20g",id:"form-layouts-separator-select",labelId:"form-layouts-separator-select-label",value:we,onChange:function(e){return Ce(e.target.value)},required:!0,children:je.map((function(e,t){return(0,i.jsx)(k.Z,{value:e,children:e},t)}))})]})}),(0,i.jsx)(f.ZP,{item:!0,xs:12,children:(0,i.jsx)(y.Z,{sx:{marginBottom:0}})}),(0,i.jsxs)(f.ZP,{item:!0,xs:12,children:[(0,i.jsx)(v.Z,{variant:"body2",sx:{fontWeight:600,pb:2},children:"Signature"}),(0,i.jsx)(d,{onSignatureSave:Ne}),H&&(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{children:"Preview Signature:"}),(0,i.jsx)("img",{src:H,alt:"Signature Preview"})]})]}),(0,i.jsx)(f.ZP,{item:!0,xs:12,children:(0,i.jsx)(B.Z,{label:"Do you agree to the terms and conditions as set out by the user agreement?",control:(0,i.jsx)(_.Z,{name:"checkbox-agreement"}),checked:ce,onChange:function(){return de(!ce)},sx:{"& .MuiButtonBase-root":{paddingTop:0,paddingBottom:0}}})}),(0,i.jsxs)(f.ZP,{item:!0,xs:12,children:[(0,i.jsx)(B.Z,{label:"I would like to be updated via whatsapp",control:(0,i.jsx)(_.Z,{name:"checkbox-whatsapp"}),checked:ae,onChange:function(){return se(!ae)},sx:{"& .MuiButtonBase-root":{paddingTop:0,paddingBottom:0}}}),(0,i.jsx)(B.Z,{label:"I would like to sign up to the newsletter",control:(0,i.jsx)(_.Z,{name:"checkbox-newsletter"}),checked:le,onChange:function(){return oe(!le)},sx:{"& .MuiButtonBase-root":{paddingTop:0,paddingBottom:0}}})]}),(0,i.jsx)(f.ZP,{item:!0,xs:6,children:(0,i.jsx)(p.Z,{size:"large",variant:"contained",sx:{marginBottom:7},type:"submit",children:"Create an account"})})]})]})})]})})})})})}},function(e){e.O(0,[2657,7709,8360,3678,1620,8682,7364,5475,9774,2888,179],(function(){return t=76278,e(e.s=t);var t}));var t=e.O();_N_E=t}]);